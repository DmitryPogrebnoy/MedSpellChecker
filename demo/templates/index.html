{% extends 'bootstrap/base.html' %}
{% import "bootstrap/wtf.html" as wtf %}

{% block styles %}
{{ super() }}
<style>
    body {
        /*background-image: url("https://i.gifer.com/QsLK.gif");*/
        /*background-size: cover;*/
        /*background-repeat: repeat;*/
        background: #e8f1f9;
    }

    .form-control {
        font-size: 20px;
    }
</style>
{% endblock %}

{% block scripts %}
<!--Load JQuery -->
<script src="{{url_for('static', filename='js/jquery-3.6.4.min.js')}}"></script>
<!--Add colback-->
<script>
    $(document).ready(function () {
        $('.control-label').remove()

        $('#anamnesis_submit').click(function (e) {
            e.preventDefault();
            var url = "{{ url_for('index') }}";
            $.ajax({
                type: "POST",
                url: url,
                data: $('form').serialize(),
                success: function (data_object) {
                    let correct_result_element = $('#corrected_result')
                    if (correct_result_element.length) {
                        correct_result_element.text(data_object.data.message)
                        return
                    }
                    $('#main_row').append(
                        "<div class='col-lg-6' id=''>\n" +
                        "   <h4 class='pt-5 pb-2'>Corrected result</h4>\n" +
                        "   <p class='lead' id='corrected_result'>\n" +
                        data_object.data.message +
                        "   </p>" +
                        "</div>")
                }
            });
        });

        // Inject our CSRF token into our AJAX request.
        $.ajaxSetup({
            beforeSend: function (xhr, settings) {
                if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token }}")
                }
            }
        })
    });
</script>
{% endblock %}


{% block title %}
MedSpellchecker
{% endblock %}


{% block content %}

<div class="container">
    <h1 class="pt-5 pb-2">Welcome to MedSpellchecker Demo!</h1>
    <br>
    <p class="lead">
        MedSpellchecker based on the language ML model automatically corrects
        spelling errors in medical texts in Russian.
    </p>
    <br>
    <p class="lead">
        Just paste the anamnesis text and get a corrected result!
    </p>
    <div class="row" id="main_row">
        <div class="col-lg-6">
            <h4 class="pt-5 pb-2">Anamnesis Text</h4>
            {{ wtf.quick_form(form) }}
        </div>
    </div>
</div>


{% endblock %}

